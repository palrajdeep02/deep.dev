<%- include('partials/_header') %>
<%- include('partials/_navbar') %>

<main class="container">
    <div class="page-header">
        <h1>Manage Blog Posts</h1>
        <a href="/admin/blogs/new" class="button">Add New Post</a>
    </div>

    <div class="card-container">
        <% if(blogs.length > 0) { %>
            <% blogs.forEach(blog => { %>
                <div class="glass-card">
                    <h3 style="margin-top: 0;"><%= blog.title %></h3>
                    <p style="color: var(--text-secondary);"><%= blog.createdAt.toDateString() %></p>
                    <div style="margin-top: auto; padding-top: 1rem;">
                        <a href="/admin/blogs/edit/<%= blog._id %>" class="button btn-edit">Edit</a>
                        <form action="/admin/blogs/delete/<%= blog._id %>?_method=DELETE" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure?');">
                            <button type="submit" class="button btn-delete">Delete</button>
                        </form>
                    </div>
                </div>
            <% }) %>
        <% } else { %>
            <p style="color: var(--text-secondary);">No blog posts found.</p>
        <% } %>
    </div>
</main>

<%- include('partials/_footer') %>